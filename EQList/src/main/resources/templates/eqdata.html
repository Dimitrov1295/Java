<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org/">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Earthquakes</title>

    <link rel='icon' th:href='@{http://iamivan.co.uk/favicon.ico}' type='image/x-icon' />
    <link rel="stylesheet" th:href="@{https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{css/styles.css}">
</head>

<body>


    <div class="container">
        <h1>Earthquake information</h1>

        <div id="form">
            <form action="">
                <div id="criteria">
                    <div id="magnitude">
                        <label for="minMag">Lowest magnitude or 3</label>
                        <input min="0" max="10" id="minMag" class="form-control" placeholder="Lowest magnitude" type="number" name="minMag">
                        <label for="minMag">Highest magnitude or 10</label>
                        <input min="1" max="10" id="maxMag" class="form-control" placeholder="Highest magnitude" type="number" name="maxMag">
                    </div>
                    <div id="date">
                        <label for="minDate">The start date for earthquake results</label>
                        <input id="minDate" class="form-control" type="date" name="minDate">
                        <label for="maxDate">End date</label>
                        <input id="maxDate" class="form-control" type="date" name="maxDate">
                    </div>
                </div>
                <input class="form-control" type="submit" value="Search">
            </form>
        </div>

        <div th:if="${!earthquakes.isEmpty()}">
            <table class="table">
                <th>
                    <tr>
                        <td>Magnitude</td>
                        <td>Location</td>
                        <td>Time</td>
                    </tr>
                </th>
                <tbody>
                    <tr th:each="earthquake, value : ${earthquakes}">
                        <td class="magnitude" th:text="${earthquake.getMag()}"></td>
                        <td>
                            <a target="_blank" th:text="${earthquake.getLocation()}" th:href="@{https://www.google.co.uk/maps/place/} + ${earthquake.getMapsUrl()}"></a>
                        </td>
                        <td th:text="${earthquake.getTime()}"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div th:if="${earthquakes.isEmpty()}">
        <h3>No earthquakes match the search criteria</h3>
    </div>

    <script>
        for (let mag of document.getElementsByClassName("magnitude")) {
            if (Number(mag.innerHTML) > 7) {
                mag.style.background = "red";
            } else if (Number(mag.innerHTML) > 4) {
                mag.style.background = "yellow";
            } else mag.style.background = "green";
        }
    </script>

    <script th:src="@{https://code.jquery.com/jquery-3.5.1.min.js}"></script>
    <script th:src="@{https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js}"></script>
</body>

</html>